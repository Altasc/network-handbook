# 【计算机网络——从入门到入土】1.1计算机网络
## 快点、再快点！
上午10点，阳光明媚，没有课程的ZH靠在椅子上，观察着股市的动向。他突然用力砸了一下键盘，然后身体绝望地瘫了下去。我们且先不讨论眼神澄澈的大学生能在股市中赚到几个钱，就目前来说，ZH的眼里更多是空洞而不是澄澈。你很好奇，走了上去看看，发现它的屏幕到处都是绿油油的，而且……而且好像没有变化？你再望了望他电脑的右下角，嗯？网络已断开？有什么冰冷的东西好像拽住了你的手，你回头一看，发现是ZH在祈求你能够帮他解决网络问题，他好想想办法保住自己今晚的饭钱。
## 因特网
在开展晚饭保卫战之前，我们需要对计算机网络有一个非常清晰的认知（至少名字不能叫错吧）。我们日常接入的网络叫做**因特网**，它是一个世界范围的计算机网络，全球几十亿台设备都接入了这个网络，这个网络使用**TCP/IP族**作为通信规则。平时我们直接接触到因特网的工具有手机、电脑、电视等等，这些设备都被称为**主机**或**端系统**。端系统通过**通信链路**和**分组交换机**的网络连接到一起。通信链路由不同的物理媒介组成，比如直接连接电脑和路由器之间的**双绞铜线**，电视机机顶盒上的**同轴电缆**、光猫（调制解调器）背后的**光纤**以及手机上使用的**陆地无线电信道**和**卫星无线电信道**。它们的传输速率称为**链路传输速率**，以bit/s（比特每秒）度量。分组交换机各式各样，不过现在最常见的莫过于家里电视旁的**路由器**，和机柜里的一直在闪烁的**链路层交换机**。当一台主机向另外一台主机发送数据的时候，发送数据的主机将会把数据分段，并且为每段加上首部字节，加工后的结果我们称之为**分组**。从发送数据的主机到接收数据的主机，一个分组所经历的一系列通信链路和分组交换机称为通过该网络的**路径**。两台主机之间的通信链路和分组交换机的布设成本是巨大的，这些往往是由**ISP（网络服务提供商）**斥巨资建设的。所以如果我们想要上网，还得给它们氪氪金，通过它们接入因特网。因特网是复杂的，上面有成千上万的分组交换机和几十亿台接入的主机，各种各样的分组在快速传输。即使如此，它依然能够健壮地运行，全部都是**协议**的功劳。这些协议控制着因特网信息的接收与发送，能够让主机正确地收发数据。我们能接触到的主机（手机和电脑），它们都处于网络的边缘，它们通过**接入网**物理连接到**边缘路由器**的网络，边缘路由器就是主机到任何其他的远程主机的路径上的第一台路由器，我们在家中使用的路由器就可以将它称为边缘路由器。
## 分组交换与电路交换
通过网络链路和分组交换机移动数据有两种基本方法，它们分别是**分组交换**和**电路交换**。
### 分组交换
多数分组交换机在链路的输入端采用的是**存储转发传输**机制，也就是说，在交换机向输出链路传输这个分组的第一个比特之前，必须先完整地接收到这个分组，不能一边接收一边发送，此时分组会被储存（缓存）在交换机中。等到这个分组被完整地接收到了之后，交换机才会开始向输出链路传输（转发）这个分组。在这样的一个机制下，就要求一个分组交换机必须对每一个相连接的链路有一个输出缓存（也叫输出队列）用来存储路由器准备发送到那个链路的分组。这样的先接收再发送的模式注定了分组会在交换机转发的过程中产生时间上的浪费，这段时间将会在稍后仔细讨论。
### 报文交换
有些地方上还会提到**报文交换**，其实就是将整个数据不分段一股脑地塞进输出队列中。换句话来说，在前面的分组交换中，我们并没有限制分组的大小，那么完全可以设计这么一个分组，它的大小大到能够完整地塞入整个报文，实现报文交换。所以，报文交换从某种程度上来说就是分组交换。
### 电路交换
**电路交换**我们可以理解成网络在两台要通信的主机之间“拉了一条专线”（当然并不是真的物理上布设一条线），这样的好处是除了在建立连接时需要浪费一些时间，不再因为交换机的存储转发机制而产生时间浪费。为了实现这样“拉专线”的效果，在发送与接收数据之前，必须先建立一条专用的端到端连接，预留主机之间沿路径通讯所需要的资源（比如缓存和链路传输速率），然后数据才会开始传输。
我们再仔细想想，在建立了端到端连接之后，一台主机每时每刻都会发送数据到另一个主机吗？显然不会，但是此时这部分的网络资源仍然被这两台主机独占，其他迫切需要网络资源进行通信的主机只能等待，这无疑是资源的巨大浪费。即使分组交换和电路交换在现在都是移动数据普遍采用的方式，人们往往更加倾向于分组交换。
## 后来……
